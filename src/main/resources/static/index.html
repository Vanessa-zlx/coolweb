<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.15.9/theme-chalk/index.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/my-aside.css">
    <style>
    </style>
</head>
<body>
<div id="app">
    <el-container>
        <el-header height="80px">
            <my-header :user="user" @logout="handleLogout"></my-header>
        </el-header>
        <el-aside>
            <my-aside></my-aside>
        </el-aside>
        <el-main class="center">
            <my-slideshow :banner-arr="bannerArr"></my-slideshow>
            <!--走马灯结束-->
            <!--开始-->
            <el-row style="background-color: white;border-radius: 25px">
                <el-col :span="parseInt(3)">
                    <span style="font-size: 28px;line-height: 65px;margin: 0; padding-left: 10px">Cool Web</span>
<!--                    <p style="font-size: 28px;line-height: 65px;margin: 0"></p >-->
                </el-col>
            </el-row>
            <!--列表开始-->
            <el-row :gutter="20">
                <el-col v-for="p in postArr" :span="parseInt(24)" :key="p.id">
                    <el-card style="margin: 10px 0; height: 240px" shadow="hover">
                        <span tyle="width: 300px; margin-left: 125px">
                            <a style="color: #333;text-decoration: none"
                               v-show="p.postCover!=null"
                               :href="'/postDetail.html?id='+p.id">
                                <img :src="p.postCover" width="300" height="200" alt="文章">
<!--                                <img :src="'https://c-ssl.duitang.com/uploads/item/201504/23/20150423H1825_usALr.jpeg'" width="300" height="200" alt="">-->
                            </a>
                        </span>
                        <span style="
                        margin-left: 50px;  height: 200px; width: 700px;
                        position: absolute;"
                        >
                            <a :href="'/postDetail.html?id='+p.id">
                                <el-row style="position:absolute;">
                                <el-col style="font-family: BlinkMacSystemFont ;
                                width: 500px;font-size: 24px; color: #3c4858">{{p.postTitle}}</el-col>
                                <el-col style="position: absolute; top: 35px">
                                    <div id="brief" style="font-size: 16px; color: #718096; height: 80px">{{p.postBrief}}</div>
                                    <div style="margin-top: 20px">
                                        <i class="el-icon-date">{{p.postDate}}</i>
                                    </div>
<!--                                    <div style="font-size: 16px; color: #718096; margin-top: 20px">-->
<!--                                        <i class="el-icon-shopping-bag-1">恋爱</i>-->
<!--                                    </div>-->
                                </el-col>
                            </el-row>
                            </a>
                        </span>
                    </el-card>
                </el-col>
            </el-row>
            <div style="text-align: center;margin-bottom: 20px">
                <el-button @click="location.href='/contentList.html?type=1'">点击查看更多</el-button>
            </div>
        </el-main>
        <el-footer>
            <my-footer></my-footer>
        </el-footer>
    </el-container>
</div>

<script src="js/vue.js"></script>
<script src="js/element-ui_2.15.9_index.js"></script>
<script src="js/eui.js"></script>
<script src="js/axios.min.js"></script>
<script src="js/my-header.js"></script>
<script src="js/my-footer.js"></script>
<script src="js/my-aside.js"></script>
<script src="js/my-slideshow.js"></script>
<script src='js/jquery-1.12.4.min.js'></script>
<script src="js/hamburger.js"></script>
<script>
    let v = new Vue({
        el: "#app",
        data: function (){
            return {
                bannerArr: [],
                postArr: [],
                user:{
                    id: "",
                    name: "",
                    avatarUrl: "",
                    admin: false
                }
            }
        },
        methods: {
            handleLogout(){
                axios.get("/user/logout")
                v.user.id=null/*无需跳转*/
            }
        },
        created: function (){
            axios.get("/banner/select").then(function (response){
                v.bannerArr = response.data;
            })
            axios.get("/post/select").then(function (response) {
                v.postArr = response.data;
                const maxLength = 30;
                for(let i = 0;i < v.postArr.length;i++){ //省略过长标题
                    if (v.postArr[i].postTitle.length > maxLength) {
                        v.postArr[i].postTitle = v.postArr[i].postTitle.substring(0, maxLength) + " ...";
                    }
                }
            })
            axios.get("/user/getsession").then(function (response){
                v.user = response.data;
            })
        }
    })
</script>
<canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:99999999;pointer-events:none;"></canvas>
<script type="text/javascript" src="js/djtx.js"></script>
</body>
</html>