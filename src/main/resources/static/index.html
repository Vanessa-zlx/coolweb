<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.15.9/theme-chalk/index.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/my-aside.css">
    <style>
    </style>
</head>
<body>
<div id="app">
    <el-container>
        <el-header height="80px">
            <my-header :user="user" @logout="handleLogout"></my-header>
        </el-header>
        <el-aside>
            <my-aside></my-aside>
        </el-aside>
        <el-main class="center">
            <my-slideshow :banner-arr="bannerArr"></my-slideshow>
            <!--走马灯结束-->
            <!--开始-->
            <el-row style="background-color: white;border-radius: 25px">
                <el-col :span="parseInt(3)">
                    <span style="font-size: 28px;line-height: 65px;margin: 0; padding-left: 10px">Cool Web</span>
<!--                    <p style="font-size: 28px;line-height: 65px;margin: 0"></p >-->
                </el-col>
            </el-row>
            <!--列表开始-->
            <el-row :gutter="20">
                <el-col v-for="p in postArr" :span="parseInt(24)" :key="p.id">
                    <el-card style="margin: 10px 0; height: 240px" shadow="hover">
                        <span tyle="width: 300px; margin-left: 125px">
                            <a style="color: #333;text-decoration: none"
                               v-show="p.postCover!=null"
                               :href="'/postDetail.html?id='+p.id">
                                <img :src="p.postCover" width="300" height="200" alt="文章" style="object-fit: cover;">
<!--                                <img :src="'https://c-ssl.duitang.com/uploads/item/201504/23/20150423H1825_usALr.jpeg'" width="300" height="200" alt="">-->
                            </a>
                        </span>
                        <span style="
                        margin-left: 50px;  height: 200px; width: 700px;
                        position: absolute;"
                        >
                            <a :href="'/postDetail.html?id='+p.id">
                                <el-row style="position:absolute;">
                                <el-col style="font-family: BlinkMacSystemFont ;
                                width: 500px;font-size: 24px; color: #3c4858">{{p.postTitle}}</el-col>
                                <el-col style="position: absolute; top: 45px">
                                    <div id="brief" style="font-size: 16px; color: #718096; height: 90px">{{p.postBrief}}</div>
                                    <div style="margin-top: 20px; display: flex; gap: 25px;">
                                        <span>
                                        <svg t="1719395149994" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2591" width="16" height="16"><path d="M512.173 795c171.39 0 318.422-118.888 356.196-283.157C830.477 347.727 683.517 229 512.245 229c-171.39 0-318.422 118.888-356.197 283.157C193.941 676.273 340.9 795 512.173 795zM75.93 504.096C118.297 298.658 299.91 149 512.245 149c212.19 0 393.717 149.458 436.234 354.712a40 40 0 0 1 0.007 16.192C906.121 725.342 724.507 875 512.173 875c-212.191 0-393.718-149.458-436.235-354.712a40 40 0 0 1-0.007-16.192zM512 704c-106.039 0-192-85.961-192-192s85.961-192 192-192 192 85.961 192 192-85.961 192-192 192z m0-80c61.856 0 112-50.144 112-112s-50.144-112-112-112-112 50.144-112 112 50.144 112 112 112z" fill="#333333" p-id="2592"></path></svg>
                                            {{p.viewCount}}
                                        </span>
                                        <span>
                                            <span>
                                                <svg t="1719417106770" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5808" width="16" height="16"><path d="M481.578667 968.832l-157.909334-158.293333H85.418667A85.290667 85.290667 0 0 1 0 725.12L0.426667 128.042667C0.426667 80.768 38.4 42.666667 85.845333 42.666667h852.778667c47.189333 0 85.418667 38.101333 85.376 85.418666l-0.426667 597.12c0 47.146667-38.229333 85.333333-85.376 85.333334h-237.781333l-158.549333 158.293333a42.624 42.624 0 0 1-60.288 0z m456.704-243.712L938.666667 128.042667s-852.906667-0.128-852.906667 0.042666c0 0-0.384 597.077333-0.298667 597.077334H341.333333c11.306667 0 22.186667 4.48 30.165334 12.501333l140.330666 140.629333 140.8-140.672a42.624 42.624 0 0 1 30.165334-12.458666h255.488zM277.333333 512a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m234.666667 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m234.666667 0a64 64 0 1 1 0-128 64 64 0 0 1 0 128z" fill="#3D3D3D" p-id="5809"></path></svg>
                                            {{p.commentCount}}</span>
                                        <svg t="1719395441562" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4599" width="14" height="14"><path d="M335.808 927.744A449.536 449.536 0 0 0 960 512.896a440 440 0 0 0-35.328-174.72 449.536 449.536 0 0 0-93.12-142.528A449.536 449.536 0 0 0 99.456 338.88a449.536 449.536 0 0 0 0 349.952 449.536 449.536 0 0 0 239.552 238.912h-3.2zM245.888 249.6a374.4 374.4 0 1 1 530.432 528.512A374.4 374.4 0 0 1 245.888 249.6z m434.752 251.712H523.328v-208.64A38.528 38.528 0 0 0 485.44 256a37.888 37.888 0 0 0-39.168 36.608v246.592a37.888 37.888 0 0 0 39.168 37.888h192.64a37.888 37.888 0 0 0 37.888-37.888 37.248 37.248 0 0 0-35.328-37.888z" p-id="4600"></path></svg>
                                            {{p.postDate}}
                                        </span>
                                    </div>
<!--                                    <div style="font-size: 16px; color: #718096; margin-top: 20px">-->
<!--                                        <i class="el-icon-shopping-bag-1">恋爱</i>-->
<!--                                    </div>-->
                                </el-col>
                            </el-row>
                            </a>
                        </span>
                    </el-card>
                </el-col>
            </el-row>
            <div style="text-align: center;margin-bottom: 20px">
                <el-button @click="location.href='/contentList.html?type=1'">点击查看更多</el-button>
            </div>
        </el-main>
        <el-footer>
            <my-footer></my-footer>
        </el-footer>
    </el-container>
</div>

<script src="js/vue.js"></script>
<script src="js/element-ui_2.15.9_index.js"></script>
<script src="js/eui.js"></script>
<script src="js/axios.min.js"></script>
<script src="js/my-header.js"></script>
<script src="js/my-footer.js"></script>
<script src="js/my-aside.js"></script>
<script src="js/my-slideshow.js"></script>
<script src='js/jquery-1.12.4.min.js'></script>
<script src="js/hamburger.js"></script>
<script>
    let v = new Vue({
        el: "#app",
        data: function (){
            return {
                bannerArr: [],
                postArr: [],
                user:{
                    id: "",
                    name: "",
                    avatarUrl: "",
                    admin: false
                }
            }
        },
        methods: {
            handleLogout(){
                axios.get("/user/logout")
                v.user.id=null/*无需跳转*/
            }
        },
        created: function (){
            axios.get("/banner/select").then(function (response){
                v.bannerArr = response.data;
            })
            axios.get("/post/select").then(function (response) {
                v.postArr = response.data;
                v.postArr = v.postArr.sort((a, b) => b.commentCount - a.commentCount);
                const maxLength = 30;
                for(let i = 0;i < v.postArr.length;i++){ //省略过长标题
                    if (v.postArr[i].postTitle.length > maxLength) {
                        v.postArr[i].postTitle = v.postArr[i].postTitle.substring(0, maxLength) + " ...";
                    }
                }
            })
            axios.get("/user/getsession").then(function (response){
                v.user = response.data;
            })
        }
    })
</script>
<canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:99999999;pointer-events:none;"></canvas>
<script type="text/javascript" src="js/djtx.js"></script>
</body>
</html>